description = "Track writing progress and status, generate progress reports"

prompt = """
Track writing progress, manage creation status.

User requirements: {{args}}

## Execution Steps

### 1. Read Tracking Data
Load all tracking files:
- spec/tracking/character-state.json
- spec/tracking/plot-tracker.json
- spec/tracking/relationships.json
- spec/tracking/timeline.json

### 2. Collect Progress Information
Execute using run_shell_command: .specify/scripts/bash/track-progress.sh

Parse arguments to determine mode:
- No arguments - Display full tracking report
- --brief - Display brief information
- --plot - Display plot tracking only
- --stats - Display statistics only
- --check - Perform deep consistency check
- --fix - Automatically fix discovered issues

Statistics:
- Number of chapters written
- Total word count
- Status of each chapter
- Remaining workload

### 3. Generate Progress Report

**Overall Progress**
```
ğŸ“Š Writing Progress Report

Overall Progress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 40%
Completed: 10/25 Chapters
Total Words: 25,000/60,000 words

This Week's Progress:
- Chapters Completed: 2
- New Words Added: 5,000
- Daily Average Output: 714 words
```

**Chapter Details**
```
Chapter Status:
âœ… Chapter 1: Completed (2,500 words)
âœ… Chapter 2: Completed (2,300 words)
ğŸ“ Chapter 3: Draft (1,800 words)
â¸ï¸ Chapter 4: Ideation
âŒ Chapter 5: To Be Written
```

**Plot Tracking**
```
Main Plot Progress:
[=====>    ] 50% - Escalation Phase

Subplot Status:
- Romance Arc: [===>  ] 30%
- Growth Arc: [====> ] 40%
```

**Character Status**
```
Character Development:
- Protagonist: Growing (Phase 2)
- Antagonist: Latent
- Supporting Character A: Relationship Transitioning
```

### 4. Analyze Writing Pace
```
Writing Analysis:
- Average Speed: 500 words/hour
- Peak Output: Chapter 7 (3,200 words)
- Peak Creative Time: 8-10 PM
- Estimated Completion: 30 days later
```

### 5. Deep Validation Mode (--check)

When using the --check parameter, perform comprehensive validation:

**Basic Validation**
- Consistency between plot-tracker.json and outline.md
- Temporal logic of timeline.json
- Relationship conflicts in relationships.json
- Positional rationality of character-state.json

**Deep Character Validation**
- Load validation rules from validation-rules.json
- Scan character names in all chapters
- Compare names for consistency with character-state.json
- Check if appellations conform to relationships.json
- Verify character actions align with their personas

**Generate Validation Report**
```
ğŸ“Š Deep Validation Report
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… Passed Items: 15/18

âŒ Issues Found (3):
1. [High] Chapter 3: Incorrect protagonist name
2. [Medium] Chapter 7: Inconsistent appellation
3. [Low] Chapter 12: Timeline jump

ğŸ”§ Auto-Fixable: 2
ğŸ“ Requires Manual Confirmation: 1
```

### 6. Auto-Fix Mode (--fix)

When using the --fix parameter, automatically fix simple issues:

**Scope of Fixable Issues**
- Incorrect character names - Replace based on validation-rules.json
- Incorrect fixed appellations - Automatically correct to proper forms
- Simple typos - Correct obvious typos

**Fix Report**
```
ğŸ”§ Auto-Fix Report
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… Issues Fixed: 2
- Chapter 3: Name corrected
- Chapter 7: Appellation adjusted

âš ï¸ Requires Manual Handling: 1
- Chapter 12: Timeline needs clarification
```

### 7. Intelligent Analysis and Suggestions
```
ğŸ“ Writing Suggestions:
1. Current pace is good, maintain daily updates
2. Chapter 10 is a key turning point, requires focused preparation
3. Subplot progress is slow, suggest advancing in the next chapter
4. Character relationships can be intensified with conflict
```

### 8. Pace Analysis Report

**Chapter Structure Analysis**
```
Chapter Pattern Distribution:
- Standard Chapters: 45% (135/300)
- Segmented Chapters: 30% (90/300)
- Scene Combinations: 25% (75/300)

Content Type Distribution:
- Dialogue-Intensive: 25%
- Action Scenes: 20%
- Emotional Pacing: 30%
- Suspenseful Twists: 15%
- Transitional Connections: 10%

Pacing Curve Evaluation:
Fluctuation: â˜…â˜…â˜…â˜…â˜†
Relaxation/Tension: â˜…â˜…â˜…â˜…â˜†
Suspense: â˜…â˜…â˜…â˜†â˜†
Suggestion: Next chapter could include more action scenes
```

### 9. Update Tracking Files
Use edit_file to update the latest status of each tracking file.

### 10. Visualize Progress Report

Generate a structured report:
```
ğŸ“Š Comprehensive Tracking Report
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[Progress Bar] â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ 25%

ğŸ¯ Next Steps Recommended:
1. Resolve foreshadowing before Chapter 65
2. Strengthen protagonist-antagonist conflict
3. Supplement timeline for Volume 2

âš ï¸ Needs Attention:
- Character B has not appeared in 5 chapters
- Subplot progress is lagging
- Timeline jump in Chapter 45 needs explanation
```

### 11. Complete Report
âœ… Progress tracking complete!
- Overall Progress: [Percentage]
- This Week's Output: [Word Count]
- Estimated Completion: [Date]
- Next Step: [Suggestion]

## Notes
- Update tracking data regularly
- Pay attention to progress at key milestones
- Adjust writing plan promptly
- Maintain consistent output
"""