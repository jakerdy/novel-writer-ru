# Руководство по разработке плагинов Novel Writer

## Структура файлов плагина

```
plugin-name/
├── config.yaml          # Файл конфигурации (обязательно)
├── README.md           # Инструкция по использованию (обязательно)
├── commands/           # Каталог файлов команд
│   └── *.md           # Файлы реализации команд
└── experts/            # Режим эксперта (опционально)
    └── *.md           # Файлы экспертов
```

## Спецификация config.yaml

```yaml
# Обязательные поля
name: plugin-id         # Уникальный идентификатор, используйте строчные буквы и дефисы
version: 1.0.0         # Семантическое версионирование
displayName: Отображаемое имя   # Название на китайском языке, отображаемое в пользовательском интерфейсе
description: Описание функции   # Одно предложение, описывающее назначение плагина

# Необязательные поля
author: Имя автора
homepage: URL

# Конфигурация команд
commands:
  - id: command-id      # Идентификатор команды, должен иметь префикс плагина
    name: Название команды       # Отображаемое название на китайском языке
    description: Описание команды
    file: commands/command-id.md  # Путь к соответствующему файлу

# Конфигурация экспертов (опционально)
experts:
  - id: expert-id
    name: Имя эксперта
    description: Описание эксперта
    file: experts/expert-id.md
```

## Шаблон файла команды

```markdown
# [Название команды на китайском] - /[command-id]

## Роль системы
Вы [описание роли], специалист в области [область экспертизы].

## Задача
[Четкое описание задачи]

## Предварительные требования
[Опционально, если требуется выполнение других команд перед этой]

## Рабочий процесс
1. [Шаг 1]
2. [Шаг 2]
3. [Шаг 3]

## Формат вывода
[Конкретный пример формата вывода]

## Примечания
- [Важное напоминание 1]
- [Важное напоминание 2]
```

## Правила разработки

### Правила именования
- Название плагина: `novel-[функция]-[подфункция]`, например `novel-character-generator`
- ID команды: Используйте префикс для предотвращения конфликтов, например `/char-`, `/plot-`, `/constitution-`
- Имя файла: Соответствует ID команды

### Обязательные правила
1. Каждая команда — отдельный файл с единой функцией
2. Команды взаимодействуют через "Предварительные требования", прямое общение не допускается
3. README.md должен содержать: описание функции, инструкцию по использованию, примеры
4. Не использовать внешние API или сервисы
5. Основной язык — китайский

### Режим эксперта (опционально)
Добавляйте экспертов для глубокого интерактивного руководства:

```markdown
# [Имя эксперта]

## Краткая биография эксперта
[Прошлое и специализация эксперта]

## Основные возможности
- [Возможность 1]
- [Возможность 2]

## Предоставляемые услуги
[Конкретные предоставляемые услуги]

## Способ взаимодействия
[Как взаимодействовать с пользователем]
```

## Процесс разработки плагинов с помощью ИИ

При получении запроса на разработку плагина:

1. **Анализ требований**
   - Определите, какую проблему решает плагин
   - Определите, сколько команд необходимо
   - Нужен ли режим эксперта

2. **Проектирование структуры**
   - Определите название плагина и префиксы команд
   - Спланируйте список команд и распределение функций

3. **Генерация файлов**
   - config.yaml - Конфигурация плагина
   - README.md - Инструкция по использованию
   - commands/*.md - Реализация каждой команды
   - experts/*.md - Файлы экспертов (при необходимости)

4. **Формат вывода**
   Выводите полный код в следующем порядке:
   - Сначала: config.yaml
   - Затем: файлы каждой команды
   - Далее: файлы экспертов (при наличии)
   - В конце: README.md

## Пример структуры

### Простой плагин (2-3 команды)
```yaml
name: novel-idea-generator
commands:
  - id: idea-plot      # Генерация идей для сюжета
  - id: idea-character # Генерация идей для персонажей
```

### Сложный плагин (несколько команд, взаимодействующих друг с другом)
```yaml
name: novel-analysis-tool
commands:
  - id: analyze-load    # Основная команда: загрузка файла
  - id: analyze-plot    # Анализ сюжета (зависит от load)
  - id: analyze-style   # Анализ стиля письма (зависит от load)
experts:
  - id: analysis-coach  # Эксперт по анализу
```

## Требования к выводу

При генерации плагина обязательно:
1. Все файлы должны быть полными и готовыми к использованию, без пропусков
2. Описания команд должны быть четкими, без двусмысленности
3. Предоставьте как минимум 2 примера использования
4. Блоки кода должны быть правильно размечены по языку
5. Не добавляйте пояснений к реализации или комментариев, выводите только код