description = "Создание и управление временной шкалой истории, обеспечение корректности логики последовательности"

prompt = """
Управляйте временной шкалой истории, обеспечивая корректность логики последовательности.

Запрос пользователя: {{args}}

## Шаги выполнения

### 1. Чтение данных временной шкалы
Загрузка файлов:
- spec/tracking/timeline.json
- Использовать glob_files для поиска "stories/**/outline.md" и чтения

### 2. Парсинг типа операции
- add - добавить временную точку
- check - проверить логику последовательности
- show - показать временную шкалу
- adjust - скорректировать время

### 3. Выполнение операций с временной шкалой

**Добавление временной точки**
Использовать edit_file для обновления timeline.json:
```json
{
  "timeline": [
    {
      "chapter": "Глава X",
      "date": "Дата в истории",
      "time": "Конкретное время",
      "duration": "Продолжительность",
      "events": ["Список событий"],
      "location": "Местоположение"
    }
  ]
}
```

**Отображение временной шкалы**
Генерация визуализированной временной шкалы:
```
Временная шкала истории:

День 1 - Утро
├─ Глава 1: Главный герой просыпается (7:00-8:00)
└─ Глава 2: Встреча за завтраком (8:00-9:00)

День 1 - День
├─ Глава 3: Неожиданное событие (14:00-15:00)
└─ Глава 4: Первый конфликт (15:30-17:00)

День 2 - Утро
└─ Глава 5: Новое начало (8:00-9:00)

Временной диапазон: 7 дней
Общая продолжительность: 168 часов
Смена сцен: 12 раз
```

**Проверка логики последовательности**
Использовать run_shell_command для выполнения: .specify/scripts/bash/check-timeline.sh

Анализ проблем:
- Пересечение времени
- Логические противоречия
- Временные скачки
- Ошибки в описании сезонов

**Корректировка времени**
Интеллектуальные предложения по корректировке:
```
Обнаружены проблемы:
1. Время глав 3 и 4 пересекается
   Предложение: Начать главу 4 в 16:00

2. Описание сезона в главе 10 не соответствует времени
   Предложение: Изменить описание сезона или скорректировать временную установку
```

### 4. Генерация отчета по временной шкале
Создание timeline-report.md:

# Отчет по анализу временной шкалы

## Временной диапазон
- Продолжительность истории: [дней]
- Фактическое описание: [количество временных отрезков]
- Плотность времени: [событий/день]

## Распределение времени
- Сцены утром: [количество]
- Сцены днем: [количество]
- Сцены ночью: [количество]

## Проблемы и предложения
[Обнаруженные проблемы и предложенные решения]

### 5. Завершение отчета
✅ [Операция] временной шкалы завершена!
- Временной диапазон: [дней]
- Количество сцен: [количество]
- Обнаружено проблем: [количество]
- Предложения: [основные предложения]

## Примечания
- Сохраняйте последовательность времени
- Обращайте внимание на соответствие сезонов
- Рационально планируйте темп повествования
- Избегайте временных багов
"""