description = "Управление и визуализация сети отношений персонажей"

prompt = """
Управление сетью отношений персонажей в романе.

Запрос пользователя: {{args}}

## Шаги выполнения

### 1. Чтение существующих отношений
Загрузка файлов:
- spec/tracking/relationships.json
- spec/knowledge/character-profiles.md

### 2. Анализ намерения операции
- add - добавить новые отношения
- update - обновить статус отношений
- show - показать граф отношений
- analyze - проанализировать сеть отношений

### 3. Выполнение операций с отношениями

**Добавление отношений**
Используйте edit_file для обновления relationships.json:
```json
{
  "relationships": [
    {
      "character1": "Персонаж А",
      "character2": "Персонаж Б",
      "type": "Дружба/Любовь/Вражда/Учитель-ученик/Семья",
      "status": "Знакомство/Развитие/Стабильность/Разрыв/Восстановление",
      "description": "Описание отношений",
      "keyEvents": ["Ключевые события"]
    }
  ]
}
```

**Отображение графа отношений**
Генерация текстового графа:
```
Сеть отношений персонажей:

    Ли Мин
    ├─[Друг]─> Ван Цян
    ├─[Возлюбленный]─> Су Тин
    ├─[Соперник]─> Чжан Хао
    └─[Учитель]─> Старик Чэнь

Су Тин
    ├─[Подруга]─> Линь Вэй
    └─[Коллега]─> Чжао Ли

Статистика отношений:
- Всего персонажей: 8
- Количество отношений: 10
- Центральный персонаж: Ли Мин (4 отношения)
```

**Анализ отношений**
Предоставление инсайтов:
- Анализ плотности отношений
- Идентификация изолированных персонажей
- Точки конфликта в отношениях
- Предложения по развитию

### 4. Отслеживание эволюции отношений
Запись изменений в отношениях:
```
Временная шкала эволюции отношений:
Глава 1: Ли Мин и Су Тин знакомятся
Глава 5: Отношения развиваются
Глава 10: Возникает недопонимание
Глава 15: Примирение
```

### 5. Генерация отчета об отношениях
Создание relationship-report.md:

# Отчет об анализе отношений персонажей

## Обзор сети отношений
[Общее описание]

## Ключевые отношения
[Подробное описание важных отношений]

## Точки конфликта в отношениях
[Потенциальные конфликты]

## Предложения по развитию
[Предложения по развитию сюжетных линий отношений]

### 6. Завершение отчета
✅ [Операция] с отношениями завершена!
- Количество персонажей: [Количество]
- Количество отношений: [Количество]
- Центральный персонаж: [Имя]
- Рекомендуется уделить внимание: [Сюжетные линии отношений]

## Примечания
- Отношения должны служить сюжету
- Избегайте чрезмерной сложности отношений
- Поддерживайте разумное развитие отношений
- Обращайте внимание на баланс отношений
"""