```sh
#!/bin/bash

# track-progress.sh - –ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–æ–º–∞–Ω–∞
# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç --check –¥–ª—è –≥–ª—É–±–æ–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ --fix –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/../.." && pwd)"

# –í—ã–≤–æ–¥ —Ü–≤–µ—Ç–æ–º
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
MODE="report"  # –†–µ–∂–∏–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
if [[ "$1" == "--check" ]]; then
    MODE="check"
elif [[ "$1" == "--fix" ]]; then
    MODE="fix"
elif [[ "$1" == "--brief" ]]; then
    MODE="brief"
elif [[ "$1" == "--plot" ]]; then
    MODE="plot"
elif [[ "$1" == "--stats" ]]; then
    MODE="stats"
fi

echo -e "${BLUE}üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞...${NC}"
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
check_files() {
    local has_files=false

    if [[ -f "stories/current/progress.json" ]]; then
        has_files=true
    fi

    if [[ -f "spec/tracking/plot-tracker.json" ]]; then
        has_files=true
    fi

    if [[ "$has_files" == false ]]; then
        echo -e "${YELLOW}‚ö†Ô∏è –§–∞–π–ª—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å–Ω–∞—á–∞–ª–∞.${NC}"
        exit 1
    fi
}

# –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ—Ç—á–µ—Ç–∞
show_basic_report() {
    echo -e "${GREEN}üìñ –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–æ–º–∞–Ω–∞${NC}"
    echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"

    # –ß—Ç–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
    if [[ -f "stories/current/progress.json" ]]; then
        echo -e "${BLUE}‚úçÔ∏è –ü—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞–ø–∏—Å–∞–Ω–∏—è${NC}"
        # –ó–¥–µ—Å—å –ò–ò –ø—Ä–æ—á–∏—Ç–∞–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ
        echo "  –°—Ç–∞—Ç—É—Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–ª–∞–≤ –æ–∂–∏–¥–∞–µ—Ç –∞–Ω–∞–ª–∏–∑–∞..."
    fi

    # –ß—Ç–µ–Ω–∏–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—é–∂–µ—Ç–∞
    if [[ -f "spec/tracking/plot-tracker.json" ]]; then
        echo -e "${BLUE}üìç –°—Ç–∞—Ç—É—Å —Å—é–∂–µ—Ç–∞${NC}"
        echo "  –ü—Ä–æ–≥—Ä–µ—Å—Å –æ—Å–Ω–æ–≤–Ω–æ–π –ª–∏–Ω–∏–∏ –æ–∂–∏–¥–∞–µ—Ç –∞–Ω–∞–ª–∏–∑–∞..."
    fi

    echo ""
}

# –†–µ–∂–∏–º –≥–ª—É–±–æ–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
run_deep_check() {
    echo -e "${GREEN}üîç –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≥–ª—É–±–æ–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏...${NC}"
    echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"

    # –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
    echo -e "${BLUE}–≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞${NC}"
    echo "  [P] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ —Å—é–∂–µ—Ç–∞..."
    echo "  [P] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª—ã..."
    echo "  [P] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π..."
    echo "  [P] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∏—Ä–∞..."

    # –≠—Ç–∞–ø 2: –ì–ª—É–±–æ–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
    echo -e "${BLUE}–≠—Ç–∞–ø 2: –ì–ª—É–±–æ–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π${NC}"

    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫–∏
    if [[ -f "spec/tracking/validation-rules.json" ]]; then
        echo "  ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫–∏"
        echo "  –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –≥–ª–∞–≤–∞—Ö..."
        echo "  –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å character-state.json..."
        echo "  –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π..."

        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –ø—Ä–æ–≤–µ—Ä–∫–∏ (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
        cat << EOF > /tmp/validation-tasks.md
# –ó–∞–¥–∞—á–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ)

## –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ [–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ]
- [ ] T001 [P] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ plot-check
- [ ] T002 [P] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ timeline
- [ ] T003 [P] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ relations
- [ ] T004 [P] –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ world-check

## –≠—Ç–∞–ø 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- [ ] T005 –ó–∞–≥—Ä—É–∑–∫–∞ validation-rules.json
- [ ] T006 –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –≤ –≥–ª–∞–≤–∞—Ö
- [ ] T007 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –∏–º–µ–Ω
- [ ] T008 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π
- [ ] T009 –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π

## –≠—Ç–∞–ø 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
- [ ] T010 –°–≤–æ–¥–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- [ ] T011 –û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- [ ] T012 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
EOF

        echo -e "${GREEN}  ‚úÖ –ó–∞–¥–∞—á–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã${NC}"
    else
        echo -e "${YELLOW}  ‚ö†Ô∏è –§–∞–π–ª –ø—Ä–∞–≤–∏–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω${NC}"
        echo "  –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å spec/tracking/validation-rules.json"
    fi

    # –≠—Ç–∞–ø 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø—Ä–æ–≤–µ—Ä–∫–µ
    echo -e "${BLUE}–≠—Ç–∞–ø 3: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –æ –ø—Ä–æ–≤–µ—Ä–∫–µ${NC}"
    echo ""
    echo "üìä –û—Ç—á–µ—Ç –æ –≥–ª—É–±–æ–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ"
    echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
    echo "–ò–ò –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –≥–ª–∞–≤—ã –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –æ—Ç—á–µ—Ç..."
    echo ""
    echo -e "${YELLOW}üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞: –ü–æ—Å–ª–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å $0 --fix –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è${NC}"
}

# –†–µ–∂–∏–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
run_auto_fix() {
    echo -e "${GREEN}üîß –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è...${NC}"
    echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"

    if [[ ! -f "spec/tracking/validation-rules.json" ]]; then
        echo -e "${RED}‚ùå –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç—å --check –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á–µ—Ç–∞ –æ –ø—Ä–æ–≤–µ—Ä–∫–µ${NC}"
        exit 1
    fi

    # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    cat << EOF > /tmp/fix-tasks.md
# –ó–∞–¥–∞—á–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ)

## –≠—Ç–∞–ø 1: –ü—Ä–æ—Å—Ç–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ [–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ]
- [ ] F001 –ß—Ç–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –æ –ø—Ä–æ–≤–µ—Ä–∫–µ
- [ ] F002 [P] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –∏–º–µ–Ω–∞—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
- [ ] F003 [P] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –æ–±—Ä–∞—â–µ–Ω–∏—è—Ö
- [ ] F004 [P] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –æ–ø–µ—á–∞—Ç–æ–∫

## –≠—Ç–∞–ø 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
- [ ] F005 –°–≤–æ–¥–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] F006 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
EOF

    echo "  –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è..."
    echo "  –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è..."
    echo ""
    echo "üîß –û—Ç—á–µ—Ç –æ–± –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏"
    echo "‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ"
    echo "–ò–ò –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–∏—Ç –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã..."
    echo ""
    echo -e "${GREEN}–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å $0 --check –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏${NC}"
}

# –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
check_files

case $MODE in
    "check")
        run_deep_check
        ;;
    "fix")
        run_auto_fix
        ;;
    "brief"|"plot"|"stats")
        echo "–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ ${MODE}..."
        show_basic_report
        ;;
    *)
        show_basic_report
        echo -e "${BLUE}üí° –î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏:${NC}"
        echo "  --check : –ì–ª—É–±–æ–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ"
        echo "  --fix   : –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º"
        echo "  --brief : –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"
        echo "  --plot  : –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å—é–∂–µ—Ç–∞"
        echo "  --stats : –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏"
        ;;
esac

echo ""
echo -e "${GREEN}‚úÖ –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∑–∞–≤–µ—Ä—à–µ–Ω${NC}"
```