description = "Проверка согласованности и полноты описания мироустройства"

prompt = """
Проверить описание мироустройства на логическую непротиворечивость и полноту.

Запрос пользователя: {{args}}

## Шаги выполнения

### 1. Сбор описания мироустройства
Чтение соответствующих файлов:
- spec/knowledge/world-setting.md
- spec/knowledge/locations.md
- Использовать glob_files для поиска "stories/**/story.md" (часть описания мироустройства)
- Использовать glob_files для поиска "stories/**/chapters/**/*.md" (описание сцен)

### 2. Проведение проверки на согласованность

**Географическая логика**
```
Проверка географии:
□ Разумны ли расстояния между локациями
□ Согласуется ли описание местности
□ Соответствуют ли климат и время года
□ Правильны ли взаимные расположения
```

**Система правил**
```
Проверка правил:
□ Согласованность правил магии/технологий
□ Последовательность социальной структуры
□ Логичность экономической системы
□ Согласованность культурных обычаев
```

**Исторический контекст**
```
Проверка эпохи:
□ Единый уровень технологий
□ Связность исторических событий
□ Соответствие языка и терминологии
□ Соответствие деталей быта
```

### 3. Выявленные проблемы

**Географические противоречия**
```
Проблема 1: Несоответствие расстояний
- Глава 3: Путь из города А в город Б занимает 3 дня
- Глава 8: Тот же путь занимает всего 1 день
Предложение: Унифицировать до 2 дней пути
```

**Конфликты правил**
```
Проблема 2: Противоречие в описании способностей
- Первоначальное описание: для магии нужны заклинания
- Глава 10: Использование магии без заклинаний
Предложение: Объяснить как продвинутую технику
```

**Исторические несоответствия**
```
Проблема 3: Несоответствие уровня технологий
- Описание: средневековый сеттинг
- Глава 5: Появление современных предметов
Предложение: Удалить или заменить на предметы соответствующей эпохи
```

### 4. Проверка полноты

**Завершенность описания**
```
Полнота мироустройства: 75%

Установлено:
✅ Географическая среда
✅ Политическая система
✅ Экономическая структура
⚠️ Культурные обычаи (частично)
❌ Исторический фон (отсутствует)
❌ Языковая система (отсутствует)
```

**Что необходимо дополнить**
```
Предложения по дополнению описания:
1. Хронология ключевых исторических событий
2. Отношения между основными силами
3. Валютная система
4. Праздники и обычаи
5. Уникальная терминология
```

### 5. Генерация отчета о проверке

# Отчет о проверке мироустройства

## Оценка согласованности: 85/100

### Сильные стороны
- Детальное описание географии
- Четкие основные правила
- Логическая непротиворечивость ядра

### Выявленные проблемы
[Перечислить все проблемы]

### Предложения по улучшению
1. Высокий приоритет: [Проблема]
2. Средний приоритет: [Проблема]
3. Низкий приоритет: [Проблема]

## Оценка полноты: 75/100

### Что необходимо дополнить
[Перечислить недостающие части]

### Предложения по дополнению
[Конкретные предложения по дополнению]

### 6. Предоставление решений для исправления
Для каждой проблемы предоставить конкретные предложения по модификации:
- Место изменения
- Содержание изменения
- Альтернативные варианты

### 7. Завершение отчета
✅ Проверка мироустройства завершена!
- Согласованность: [Оценка]/100
- Полнота: [Оценка]/100
- Выявленные проблемы: [Количество]
- Предложения: Приоритет [Действие]

## Примечания
- Поддерживать актуальность документов с описанием
- Обращаться к описанию при написании
- Регулярно запускать проверку
- Постепенно улучшать мироустройство
"""