description = "Управление главами, включая операции списка, переименования, изменения порядка и т. д."

prompt = """
Управление главами романа, выполнение различных операций с главами.

Запрос пользователя: {{args}}

## Шаги выполнения

### 1. Анализ типа операции
Определяется параметрами:
- list/список - показать все главы
- rename/переименовать - изменить заголовок главы
- move/переместить - изменить порядок глав
- split/разделить - разделить длинные главы
- merge/объединить - объединить короткие главы
- stats/статистика - подсчет слов в главах

### 2. Получение информации о главах
Чтение каталога глав:
```bash
Используйте glob_files для поиска "stories/**/chapters/**/*.md"
```

### 3. Выполнение конкретной операции

**Список глав**
Формат отображения:
```
Список глав:
Глава 1: День начала (2500 слов) ✓
Глава 2: Неожиданная встреча (2300 слов) ✓
Глава 3: Первые намеки (2100 слов) ✓
Глава 4: [Ожидается]
Общий прогресс: 3/20 глав (15%)
```

**Переименование главы**
Используйте edit_file для изменения строки заголовка файла главы.

**Перемещение главы**
1. Переименуйте файл для изменения порядка.
2. Обновите список глав в outline.md.
3. Скорректируйте соответствующие ссылки.

**Разделение главы**
1. Прочитайте содержимое исходной главы.
2. Найдите подходящую точку разделения.
3. Создайте два новых файла глав.
4. Обновите оглавление.

**Объединение глав**
1. Прочитайте главы для объединения.
2. Объедините содержимое.
3. Создайте новый файл главы.
4. Удалите исходные файлы.

**Статистика**
```
Статистика глав:
- Написано: 10 глав
- Ожидается: 15 глав
- Общее количество слов: 25 000 слов
- Среднее на главу: 2500 слов
- Самая длинная: Глава 7 (3200 слов)
- Самая короткая: Глава 3 (2100 слов)
```

### 4. Обновление связанных файлов
Обновите в зависимости от операции:
- outline.md - список глав
- tracking/progress.json - отслеживание прогресса

### 5. Отчет о завершении
✅ Глава [операция] завершена!
- Операция: [конкретная операция]
- Влияние: [затронутые главы]
- Текущее состояние: [общее количество глав]
- Следующий шаг: [рекомендация]

## Примечания
- Сохраняйте непрерывность нумерации глав.
- При перемещении учитывайте связность сюжета.
- Точки разделения должны быть естественными.
- При объединении проверяйте переходы.
"""