description = "Планирование подробной структуры глав и сюжета"

prompt = """
Разработайте подробный план глав на основе синопсиса истории, используя интеллектуальные методы письма.

Требования пользователя: {{args}}

## Шаги выполнения

### 1. Чтение конфигурации и методов
Прочитайте поле "method" из файла .specify/config.json:
- Если значение "hybrid", проверьте подробную схему "hybridScheme"
- Обратитесь к соответствующему шаблону: spec/presets/[method]/outline.md

### 2. Поиск текущего каталога истории
Используйте glob_files для поиска файла "stories/**/story.md", чтобы определить текущий каталог истории.

### 3. Инициализация файлов глав
Используйте run_shell_command для выполнения: .specify/scripts/bash/setup-outline.sh

### 4. Загрузка синопсиса истории
Используйте read_file для чтения найденного файла story.md и понимания содержания истории.

### 5. Динамическое планирование глав

**Выбор режима глав**
Сначала выберите подходящий режим глав:

1. **Стандартный режим** (рекомендуется для новичков)
   - 2500-3000 слов на главу, завершается за один раз
   - Всего 300 глав для завершения книги
   - Подходит для ежедневных обновлений и стабильных публикаций

2. **Раздельный режим** (рекомендуется для продвинутого творчества)
   - Каждая глава делится на 3 части, всего 7500-9000 слов
   - Используется интеллектуальное соотношение разделения (не равные части)
   - Всего 100 глав для завершения книги

3. **Сценарный режим** (рекомендуется для профессиональных авторов)
   - Пишите по сценам, 2000-2500 слов на сцену
   - 3-4 сцены составляют одну главу
   - Гибкая комбинация, с последующей корректировкой

### 6. Интеллектуальное распределение глав

**Маркировка каждой главы по типу контента**
Проанализируйте характеристики каждой главы и порекомендуйте стратегию разделения:

Пример планирования:
```
Глава 1: Завязка сюжета【Стандартный режим, 2500 слов】
Глава 2: Появление персонажей【Раздельный режим, 7500 слов】
Глава 3: Первый конфликт【Раздельный режим, 4 части - экшн, 9500 слов】
Глава 4: Повседневное повествование【Раздельный режим, 7500 слов】
Глава 5: Ключевой поворот【Раздельный режим, 4 части - интрига, 9500 слов】
Глава 6: Эмоциональная подготовка【Раздельный режим, 4 части - эмоции, 9500 слов】
```

**Дизайн кривой темпа**
- Вступление (главы 1-3): Стандартный режим, быстрое погружение
- Развитие (главы 4-8): Раздельный режим, полное раскрытие
- Кульминация (главы 9-10): Разделение по экшн-сценам, напряженно и захватывающе
- Завершение (главы 11-12): Разделение по эмоциональным сценам, долгое послевкусие

### 7. Применение методов письма

**Структура трёх актов**
- Первый акт: 25% глав, создание сеттинга
- Второй акт: 50% глав, развитие конфликта
- Третий акт: 25% глав, кульминация и разрешение

**Путешествие героя**
Распределите 12 этапов по главам.

**Круг историй**
Цикл из 8 шагов, по 2-3 главы на каждый шаг.

**Структура из семи точек**
Точно определите 7 ключевых узлов:
- Завязка (Глава 1)
- Поворотный пункт 1 (на 25% пути)
- Точка напряжения (на 37% пути)
- Центральная точка (на 50% пути)
- Поворотный пункт 2 (на 75% пути)
- Тёмный момент (на 90% пути)
- Развязка (в конце)

**Формула Пиксар**
Цепочка из 6 причинно-следственных связей, проходящая через всю книгу.

**Десять шагов Снежинки**
Основано на списке сцен для управления главами.

**Смешанный метод**
- Основная сюжетная линия по основному методу
- Второстепенные линии по второстепенным методам
- Внутри главы по микро-методу

### 8. Генерация плана глав
После определения каталога истории, используйте write_file для создания файла outline.md в этом каталоге:

# План глав

## Общая структура
- Общее количество глав: [количество]
- Количество слов на главу: [диапазон]
- План обновлений: [частота]

## Отображение методов
[Описание узлов метода, соответствующих каждой главе]

## Разделение на тома
[Если есть несколько томов, разделите по темам]

## Подробные главы
### Глава 1: [Название]
- Количество слов: [цель]
- Ключевые моменты: [3-5 пунктов]
- Узлы метода: [соответствующее положение]

[Продолжение для других глав...]

### 9. Отчет о завершении
✅ План глав завершен!
- Метод: [используемая структура]
- Главы: [общее количество]
- Примерно: [общее количество слов]
- Следующий шаг: Используйте /write для начала создания
## Замечания
- Строго следуйте требованиям метода при распределении темпа
- Положения ключевых узлов должны быть точными
- Гармонично сочетайте уровни при использовании смешанного метода
"""