# Novel Writer - Конфигурация Gemini CLI

Этот проект настроен для поддержки Google Gemini CLI, предоставляя полный набор инструментов для создания романов.

## Доступные команды

Этот проект предоставляет следующие команды через косую черту:

### Основные команды
- `/method` - Помощник по методам интеллектуального письма
- `/story` - Создание синопсиса истории
- `/outline` - Планирование структуры глав
- `/write` - Написание содержания глав
- `/style` - Установка стиля письма
- `/expert` - Активация экспертного режима

### Команды управления
- `/chapters` - Управление главами
- `/relations` - Управление взаимоотношениями персонажей
- `/timeline` - Управление временной шкалой
- `/track` - Отслеживание прогресса
- `/track:init` - Инициализация системы отслеживания

### Команды проверки
- `/plot:check` - Проверка логики сюжета
- `/world:check` - Проверка согласованности мировоззрения

## Как использовать

В Gemini CLI просто введите команду:

```
> /method
> /story Фэнтезийная история о приключениях
> /outline
> /write Глава 1
```

## Разрешения инструментов

Этот проект настроил следующие разрешения инструментов:
- Чтение/запись файлов (read_file, write_file, edit_file)
- Выполнение команд оболочки (ограниченный диапазон)
- Поиск файлов (glob_files)

## Структура проекта

```
stories/          # Содержание историй
├── [Название истории]/
│   ├── story.md      # Синопсис истории
│   ├── outline.md    # План глав
│   └── chapters/     # Содержание глав

spec/             # Конфигурация и база знаний
├── tracking/     # Отслеживание прогресса
├── knowledge/    # Настройки мировоззрения
└── presets/      # Шаблоны методов письма

.gemini/          # Конфигурация Gemini
├── commands/     # Определение команд (TOML)
└── settings.json # Настройки Gemini
```

## Методы письма

Поддерживаются следующие методы письма:
- Трехактная структура (three-act)
- Путешествие героя (hero-journey)
- Круг историй (story-circle)
- Семиточечная структура (seven-point)
- Формула Пиксара (pixar-formula)
- Снежинка (snowflake)
- Гибридный метод (hybrid)

Используйте команду `/method`, чтобы выбрать наиболее подходящий метод.

## Поддержка плагинов

Если установлены плагины, будут доступны дополнительные команды. Посмотрите каталог `plugins/`, чтобы узнать об установленных плагинах.

## Примечания

1. **Первое использование**: сначала запустите `/method`, чтобы выбрать метод письма.
2. **Создание истории**: используйте `/story` для создания синопсиса.
3. **Планирование глав**: используйте `/outline` для планирования структуры.
4. **Начало письма**: используйте `/write` для написания содержания.

## Получение помощи

- Используйте `/expert` для активации экспертного режима и получения подробных инструкций.
- Просмотрите каталог `docs/` для получения подробной документации.
- Посетите репозиторий проекта: https://github.com/wordflowlab/novel-writer

## Известные проблемы и решения

### Проблема с китайскими символами
Gemini CLI иногда может выводить отдельные китайские символы с ошибками (отображаются как  или другие искаженные символы). Это известная проблема кодировки Gemini.

#### Меры предосторожности
1. **Настройки терминала**
   - Windows: используйте Windows Terminal или PowerShell (избегайте cmd)
   - Mac/Linux: убедитесь, что терминал поддерживает UTF-8

2. **Настройка переменных среды**
   ```bash
   # Windows PowerShell
   [Console]::OutputEncoding = [System.Text.Encoding]::UTF8

   # Mac/Linux
   export LANG=zh_CN.UTF-8
   export LC_ALL=zh_CN.UTF-8
   ```

#### Решение при появлении искаженных символов
1. **Повторная генерация**: повторно выполните ту же команду, обычно второй раз она работает нормально.
2. **Ручное исправление**: отредактируйте сгенерированный файл напрямую, заменив искаженные символы правильными китайскими.
3. **Поэтапная обработка**: если в каком-то разделе появляются искаженные символы, перегенерируйте только этот раздел.

#### Распространенные шаблоны искаженных символов
- `` → Обычно это часто используемые иероглифы, такие как "的", "了" и т. д.
- `\u4e2d\u6587` → Unicode-экранирование, необходимо преобразовать обратно в китайский язык.
- Некоторые знаки препинания отображаются некорректно → вручную замените китайскими знаками препинания.

#### Временное решение
Если искаженные символы появляются часто, вы можете:
1. Генерировать более короткие абзацы (уменьшить объем вывода за один раз).
2. Использовать стандартный режим, а не режим разделения на разделы.
3. Проверять и исправлять сразу после генерации.

Примечание: Google работает над решением этой проблемы, и последующие версии должны улучшить ситуацию.

---
*Этот проект разработан командой Novel Writer и предназначен для создания китайских романов с использованием ИИ.*