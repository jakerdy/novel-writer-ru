---
description: Определение спецификации истории, уточнение какое произведение создавать
argument-hint: [описание истории]
allowed-tools: Read(//stories/**/specification.md), Read(stories/**/specification.md), Write(//stories/**/specification.md), Write(stories/**/specification.md), Read(//memory/constitution.md), Read(memory/constitution.md), Bash(find:*), Bash(*)
model: claude-sonnet-4-5-20250929
scripts:
  sh: .specify/scripts/bash/specify-story.sh --json
  ps: .specify/scripts/powershell/specify-story.ps1 -Json
---

Пользовательский ввод: $ARGUMENTS

## Цель

Определить историю как документ требований к продукту (PRD), уточняя "что создавать", а не "как создавать". Поддержка **постепенного определения спецификаций** - от одного предложения до полной спецификации, шаг за шагом. Вывод спецификаций с пометкой `[Требует уточнения]`, оставляя место для последующих шагов уточнения.

## Уровни постепенных спецификаций

В зависимости от детализации пользовательского ввода автоматически определяется и генерируется соответствующий уровень спецификации:

**Уровень 1 - Одно предложение (Logline)**:
- Основная идея в пределах 30 слов
- Пример: "Хакер с потерей памяти обнаруживает, что живет в виртуальном мире"
- Применение: этап первоначального вдохновения

**Уровень 2 - Один абзац (Premise)**:
- Краткое изложение истории в 100-200 слов
- Включает: главный герой, конфликт, цель, препятствия
- Применение: этап проверки идеи

**Level 3 - 一页纸大纲（One-Page Spec）**：
- 包含：概要、主角、主要冲突、三幕结构
- 简化版规格（约500字）
- 适用：快速原型阶段

**Level 4 - 完整规格（Full Specification）**：
- 包含完整九章规格内容
- 详细的线索管理、成功标准等
- 适用：正式创作准备阶段

## 执行步骤

### 0. 判断规格层级

**根据用户输入自动判断层级**：

```python
input_length = len($ARGUMENTS)
existing_spec = check_if_exists()

if existing_spec:
    # 已有规格，执行升级或修改
    level = get_current_level(existing_spec)
    action = "upgrade" or "modify"
elif input_length < 50:
    # 一句话输入 → Level 1
    target_level = 1
elif input_length < 300:
    # 一段话输入 → Level 2
    target_level = 2
elif input_length < 1000:
    # 简要描述 → Level 3
    target_level = 3
else:
    # 详细描述 → Level 4
    target_level = 4
```

**决策逻辑**：
- 如果已存在规格文件，询问用户是"升级层级"还是"修改内容"
- 如果是新故事，根据输入长度自动选择层级
- 生成规格后，提示用户如何扩展到下一层级

### 1. 初始化故事规格

运行 `{SCRIPT}` 获取路径信息：
- 解析 JSON 获取 `STORY_NAME` 和 `SPEC_PATH`
- 如果是新故事，创建规格文件
- 如果已存在，准备更新或升级

### 2. 检查宪法合规性

如果存在 `.specify/memory/constitution.md`：
- 加载宪法原则
- 确保规格符合宪法价值观
- 在规格中引用相关原则

### 3. 创建故事规格文档

**根据判断的层级生成相应规格**：

---

#### Level 1 规格模板（一句话故事）

```markdown
# 故事规格书

## 元数据
- 故事名称：[名称]
- 版本：1.0.0-L1（一句话）
- 创建日期：[YYYY-MM-DD]
- 当前层级：Level 1
- 作者：[作者名]

## 一句话故事（Logline）

[30字以内的核心创意]

**示例**：
- "一个失忆的黑客发现自己活在虚拟世界中"
- "普通高中生获得预知未来的能力，但每次使用都会缩短寿命"
- "退役特工为了救女儿，必须完成一次不可能的任务"

## 核心元素识别

基于这句话，识别以下核心元素：
- **主角**：[谁]
- **困境/冲突**：[面临什么问题]
- **目标**：[想要达成什么]
- **障碍/代价**：[阻碍是什么]

## 下一步

✅ **Level 1 规格已完成**

**扩展建议**：
1. 将一句话扩展为一段话（100-200字）
2. 运行 `/specify` 命令，输入扩展的段落
3. 系统将自动升级到 Level 2

**扩展提示**：
- 加入主角的背景和动机
- 明确主要冲突的起因
- 暗示故事的走向和结局可能性
```

---

#### Level 2 规格模板（一段话概要）

```markdown
# 故事规格书

## 元数据
- 故事名称：[名称]
- 版本：1.1.0-L2（一段话）
- 创建日期：[YYYY-MM-DD]
- 当前层级：Level 2
- 作者：[作者名]

## 一句话故事（Logline）

[从Level 1继承，或新提取]

## 一段话概要（Premise）

[100-200字的故事梗概，包含主角、冲突、目标、障碍]

**示例结构**：
{主角背景}在{起始情境}下，发现/遭遇{核心冲突}。为了{目标}，他/她必须{行动}，但{主要障碍}使得{困难/代价}。最终{暗示结局走向}。

## 核心要素

### 主角设定
- **身份**：[职业/年龄/背景]
- **性格特点**：[2-3个关键词]
- **核心欲望**：[想要什么]
- **致命弱点**：[阻碍他的是什么]

### 核心冲突
- **外部冲突**：[与什么对抗]
- **内部冲突**：[内心挣扎是什么]
- **冲突起因**：[为什么现在爆发]

### 故事走向
- **起点**：[故事从哪里开始]
- **中点**：[预计的转折点]
- **终点**：[可能的结局方向]

## 类型初步定位

- **主类型**：[玄幻/都市/历史/科幻等]
- **子类型**：[具体流派]
- **参考作品**：类似[作品名]的[某个特点]

## 下一步

✅ **Level 2 规格已完成**

**扩展建议**：
1. 将概要扩展为一页纸大纲（约500字）
2. 增加三幕结构、主要角色、关键场景
3. 运行 `/specify` 命令，输入扩展内容
4. 系统将自动升级到 Level 3

**扩展提示**：
- 明确三幕结构的分界点
- 增加2-3个主要配角
- 列出5-10个关键场景
- 思考世界观的基本设定
```

---

#### Level 3 规格模板（一页纸大纲）

```markdown
# 故事规格书

## 元数据
- 故事名称：[名称]
- 版本：1.2.0-L3（一页纸）
- 创建日期：[YYYY-MM-DD]
- 当前层级：Level 3
- 作者：[作者名]

## 一、故事核心

### 一句话故事
[从Level 1继承]

### 故事简介（100-200字）
[从Level 2继承]

### 核心主题
- **主题**：[如"成长"、"救赎"、"复仇"]
- **情感内核**：[希望读者感受到什么]

## 二、主要角色（3-5人）

### 主角
- **姓名**：[名字]
- **身份/背景**：[简要]
- **核心欲望**：[想要什么]
- **性格弧光**：从[A状态] → 经历[冲突] → 成为[B状态]

### 主要配角1
[姓名、功能定位、与主角关系]

### 主要配角2
[姓名、功能定位、与主角关系]

### 反派/对抗力量
[姓名/势力、动机、威胁程度]

## 三、三幕结构

### 第一幕：建立（预计篇幅的25%）
- **起始**：[日常世界]
- **触发事件**：[打破平衡的事件]
- **决定**：[主角决定行动]
- **进入新世界**：[离开舒适区]

### 第二幕：对抗（预计篇幅的50%）
- **上半段**：[尝试与失败]
- **中点**：[重大转折/假胜利或假失败]
- **下半段**：[形势恶化/黑暗时刻]
- **最低点**：[一切似乎失败]

### 第三幕：解决（预计篇幅的25%）
- **顿悟**：[主角的觉醒/成长]
- **最终对抗**：[高潮战斗/冲突]
- **结局**：[新的平衡状态]

## 四、关键场景（5-10个）

1. **[场景1名称]**：[1-2句描述，情感作用]
2. **[场景2名称]**：[描述]
3. **[场景3名称]**：[描述]
4. ...

## 五、目标定位

### 目标读者
- **年龄段**：[范围]
- **类型偏好**：[玄幻/都市/历史等]
- **阅读场景**：[碎片时间/深度阅读]

### 市场定位
- **主类型**：[类型]
- **子类型**：[流派]
- **竞品分析**：类似[作品1]的[特点] + [作品2]的[特点]
- **差异化**：[核心卖点]

### 量化目标
- **目标字数**：[3万/10万/50万]
- **更新频率**：[日更/周更]
- **完成时间**：[预计时长]

## 六、下一步

✅ **Level 3 规格已完成**

**扩展建议**：
1. 将一页纸大纲扩展为完整规格
2. 增加详细的线索管理规格（多线索、伏笔、交汇点）
3. 增加成功标准、约束条件、风险评估
4. 运行 `/specify` 命令，告诉AI"扩展到完整规格"
5. 系统将自动升级到 Level 4

**扩展提示**：
- 明确多线索管理策略（如有）
- 列出所有约束条件和红线
- 标记5-10个需要澄清的决策点
- 准备参考资料和灵感来源
```

---

#### Level 4 规格模板（完整规格）

使用完整九章规格结构（保持原有模板）：

```markdown
# 故事规格书

## 元数据
- 故事名称：[名称]
- 版本：1.0.0
- 创建日期：[YYYY-MM-DD]
- 状态：草案
- 作者：[作者名]

## 一、故事概要

### 一句话故事（电梯演讲）
[30字以内描述故事核心]

### 故事简介（100-200字）
[扩展描述，包含主要冲突和结局暗示]

### 核心主题
- 主题：[如"成长"、"救赎"、"复仇"]
- 深层含义：[想要表达什么]
- 情感内核：[希望读者感受到什么]

## 二、目标定位

### 目标读者画像
- 年龄段：[需要澄清：具体年龄范围]
- 性别倾向：[需要澄清：男性向/女性向/通用]
- 阅读层次：[需要澄清：入门/进阶/资深]
- 类型偏好：[玄幻/都市/历史等]
- 阅读场景：[碎片时间/深度阅读]

### 市场定位
- 主类型：[需要澄清：爽文/悬疑/言情/严肃文学/科幻/奇幻/历史/都市/其他]
- 子类型：[具体流派，如系统流/本格推理/霸总文等]
- 类型融合：[如有，如悬疑+爱情]
- 类型标签：[主标签] + [副标签]
- 竞品分析：类似[作品1]的[特点] + [作品2]的[特点]
- 差异化：[需要澄清：核心卖点是什么]

## 三、成功标准

### 量化指标
- 目标字数：[需要澄清：3万/10万/50万]
- 更新频率：[需要澄清：日更/周更/月更]
- 完成时间：[预计时长]
- 商业目标：[如适用]

### 质量标准
- 逻辑一致性：[必须/应该]无明显漏洞
- 人物丰满度：主角有[X]个层次，配角有[Y]个层次
- 情节紧凑度：[需要澄清：每章都有冲突/允许过渡章节]
- 文字水准：[需要澄清：通俗易懂/文学性/专业性]

### 读者反馈指标
- 目标评分：[如适用]
- 互动率：[评论/收藏比例]
- 完读率：[期望的读者完成度]

## 四、核心需求

### 必须包含（P0）
1. [核心情节元素1]
2. [核心人物关系]
3. [核心冲突设定]
4. [必要的世界观元素]

### 应该包含（P1）
1. [增强体验的元素]
2. [深化主题的内容]
3. [丰富人物的支线]

### 可以包含（P2）
1. [锦上添花的内容]
2. [可选的支线]
3. [额外的彩蛋]

## 五、线索管理规格

> **多线索管理说明**：本章节定义故事的所有线索(主线、副线)及其管理策略，用于解决多线索并行推进、交汇时机控制、修改后一致性保证等问题。

### 5.1 线索定义表

定义所有故事线索的基本信息：

| 线索ID | 线索名称                | 类型               | 优先级   | 起止章节        | 核心冲突         | 主要角色         |
| ------ | ----------------------- | ------------------ | -------- | --------------- | ---------------- | ---------------- |
| PL-01  | [线索1名称，如"家庭线"] | 主线/支线/主线支撑 | P0/P1/P2 | [起始章-结束章] | [线索的核心冲突] | [涉及的主要角色] |
| PL-02  | [线索2名称，如"爱情线"] | 主线/支线/主线支撑 | P0/P1/P2 | [起始章-结束章] | [线索的核心冲突] | [涉及的主要角色] |

**说明**：
- 线索ID统一格式：PL-XX(Plotline的缩写)
- 类型：主线(驱动故事发展)、支线(丰富情节)、主线支撑(为主线服务)
- 优先级：P0(必须)、P1(重要)、P2(可选)

### 5.2 线索节奏规划

规划每条线索在不同阶段的活跃程度：

| 线索ID | 第一卷   | 第二卷   | 第三卷   | 第四卷   |
| ------ | -------- | -------- | -------- | -------- |
| PL-01  | ⭐⭐⭐ 活跃 | ⭐⭐ 中等  | ⭐ 背景   | ⭐⭐⭐ 活跃 |
| PL-02  | ⭐⭐ 启动  | ⭐⭐⭐ 活跃 | ⭐⭐⭐ 活跃 | ⭐⭐ 收尾  |

**说明**：
- ⭐⭐⭐ 活跃：本卷重点推进，大量篇幅
- ⭐⭐ 中等：正常推进，适量篇幅
- ⭐ 背景：偶尔提及，保持存在感
- ❌ Не появилось: зацепка еще не активирована

### 5.3 Планирование точек пересечения зацепок

Заранее спланируйте точки пересечения между зацепками, чтобы избежать произвольных действий со стороны ИИ:

| ID точки пересечения | Глава         | Задействованные зацепки | Содержание точки пересечения                             | Ожидаемый эффект                |
| -------------------- | ------------- | ----------------------- | -------------------------------------------------------- | ------------------------------- |
| X-001                | [Номер главы] | PL-XX+PL-YY             | [Как две/несколько зацепок пересекаются, что происходит] | [Влияние на сюжет и персонажей] |
| X-002                | [Номер главы] | PL-XX+PL-YY+PL-ZZ       | [Конкретное содержание пересечения]                      | [Ожидаемый эффект]              |

**Пояснения**:
- ID точки пересечения: унифицированный формат X-XXX (первая буква от Intersection)
- Задействованные зацепки: перечислите все ID зацепок, которые пересекаются в этой точке
- Содержание точки пересечения: конкретный сюжет или событие
- Ожидаемый эффект: эмоциональный конфликт, поворот сюжета, рост персонажа и т. д.

### 5.4 Таблица управления заделами

Управляйте всеми заделами (закладками) и их раскрытием, чтобы ничего не упустить:

| ID задела | Глава закладки | Задействованные зацепки | Содержание задела                                   | Глава раскрытия | Способ раскрытия                        |
| --------- | -------------- | ----------------------- | --------------------------------------------------- | --------------- | --------------------------------------- |
| F-001     | [Номер главы]  | PL-XX                   | [Что заложено, конкретное содержание]               | [Номер главы]   | [Как раскрывается, через какое событие] |
| F-002     | [Номер главы]  | PL-XX+PL-YY             | [Содержание задела, охватывающее несколько зацепок] | [Номер главы]   | [Способ раскрытия]                      |

**Пояснения**:
- ID задела: унифицированный формат F-XXX (первая буква от Foreshadowing)
- Задействованные зацепки: зацепки, связанные с заделом, возможно, несколько
- Номера глав закладки и раскрытия должны быть четко указаны, чтобы избежать забывчивости

### 5.5 Матрица принятия решений по изменению зацепок

При необходимости изменения какой-либо зацепки, оцените влияние согласно этому процессу:

**Чек-лист изменений**:
1. Проверьте раздел 5.2: в каких томах активна эта зацепка? Нужно ли корректировать активность?
2. Проверьте раздел 5.3: какие точки пересечения задействует эта зацепка? Нужно ли менять время точек пересечения?
3. Проверьте раздел 5.4: какие заделы связаны с этой зацепкой? Нужно ли корректировать закладку/раскрытие заделов?
4. Проверьте creative-plan.md: какие главы/сегменты требуют синхронного изменения?
5. Проверьте tasks.md: какие задачи по написанию требуют перепланирования?
6. Проверьте plot-tracker.json: каков текущий прогресс, как его скорректировать?

**Пример**: Предположим, мы изменяем PL-03 (любовная линия), перенося появление персонажа в 50-ю главу (изначально планировалось в 100-ю):
- ✅ Точка пересечения X-004 должна быть перенесена или отменена
- ✅ Активные зацепки в главах второго тома должны быть скорректированы
- ✅ Поле "Задействованные зацепки" в связанных задачах должно быть обновлено
- ✅ Может повлиять на время раскрытия задела F-002

### 5.6 Принцип согласованности зацепок

**Принципы планирования**:
- Каждая зацепка должна иметь четкое начало, развитие и завершение.
- Основная линия занимает 40-60% общего объема.
- Второстепенных линий не более 2-3, чтобы избежать излишнего распыления.
- Пересечения зацепок должны служить теме, а не быть самоцелью.
- Зацепки, находящиеся в длительной спячке (>20 глав), должны иметь обоснование.

**Критерии проверки**:
- [ ] Все зацепки имеют четкие конфликты и решения.
- [ ] Ритм зацепок распределен равномерно, без чрезмерной концентрации или пробелов.
- [ ] Количество точек пересечения умеренное (рекомендуется 2-3 на 50 глав).
- [ ] Все заделы имеют соответствующий план раскрытия.
- [ ] Матрица принятия решений по изменениям выполнима.

## Шесть. Ограничивающие условия

### Красные линии контента
- Абсолютно запрещено: [например, незаконный контент]
- Необходимо избегать: [например, чувствительные темы]
- Обрабатывать с осторожностью: [требуется уточнение: как обрабатывать эмоциональные отношения]

### Ограничения творчества
- Ограничения по знаниям: [требуется уточнение: требуются ли профессиональные знания]
- Ограничения по времени: [срок выполнения]
- Ограничения по ресурсам: [например, необходимые справочные материалы]

### Технические ограничения
- Платформа публикации: [требуется уточнение: платформа веб-романов / публикация / личные медиа]
- Требования к формату: [например, длина главы]
- Требования к обновлению: [например, фиксированное время]

## Семь. Оценка рисков

### Риски творчества
- Сложность письма: [требуется уточнение: в чем заключаются трудности]
- Истощение вдохновения: [как справиться]
- Логические пробелы: [оценка сложности]
- Управление множественными зацепками: [требуется уточнение: не слишком ли много зацепок]

### Рыночные риски
- Гомогенизация: [как дифференцироваться]
- Восприятие читателями: [требуется уточнение: не слишком ли много инноваций]
- Актуальность: [не устареет ли тема]

## Восемь. Ключевые точки принятия решений [требуется уточнение]

Следующие ключевые решения должны быть уточнены на этапе `/clarify`:
1. [Решение 1: например, характер главного героя - горячий или спокойный]
2. [Решение 2: например, концовка - открытая или счастливая]
3. [Решение 3: например, повествование - однолинейное или многолинейное]
4. [Решение 4: например, темп - быстрый или медленный]
5. [Решение 5: например, стиль - легкий или серьезный]

## Девять. Чек-лист проверки

- [ ] Краткое изложение истории четкое и ясное
- [ ] Целевая аудитория определена точно
- [ ] Критерии успеха измеримы
- [ ] Основные потребности перечислены
- [ ] Спецификация управления зацепками определена
- [ ] Ограничивающие условия выявлены
- [ ] Риски оценены
- [ ] Ключевые точки принятия решений отмечены

## Приложение: Справочные материалы

### Источники вдохновения
- [Источник 1]
- [Источник 2]

### Рекомендуемые произведения
- [Произведение 1]:参考其[особенность]
- [Произведение 2]:参考其[особенность]

### Дополнительные пояснения
[Другие моменты, требующие пояснения]
```

### 4. Вывод спецификации в соответствии с уровнем

**На основе уровня, определенного на шаге 0, выберите соответствующий шаблон для вывода**:

- **Уровень 1**: Вывод: одно предложение спецификации + идентификация ключевых элементов + руководство по расширению
- **Уровень 2**: Вывод: параграф спецификации + ключевые элементы + позиционирование типа + руководство по расширению
- **Уровень 3**: Вывод: одностраничная спецификация + трехактная структура + ключевые сцены + руководство по расширению
- **Уровень 4**: Вывод: полная девятиглавная спецификация + пометка `[требуется уточнение]`

**Подсказки после вывода**:

Для Уровня 1-3 сообщите пользователю:
```
✅ Спецификация Уровня X завершена!

**Текущий прогресс**: Одно предложение → Параграф → Одна страница → Полная спецификация
            [=====---] (Вы здесь)

**Следующие шаги**:
1. Немедленно начните писать, используя текущую спецификацию (подходит для быстрого прототипирования)
2. Расширьте до следующего уровня (более детальное планирование)
3. Запустите `/clarify` для уточнения текущей спецификации

**Как расширить**:
- Предоставьте более подробное описание истории
- Снова запустите `/specify [подробное описание]`
- Система автоматически обновит до Уровня X+1
```

Для Уровня 4 сообщите пользователю:
```
✅ Полная спецификация завершена!

**Следующие шаги**:
1. Запустите `/clarify` для уточнения всех помеченных `[требуется уточнение]` решений
2. Или запустите `/plan` для начала разработки плана написания
```

### 5. Пометка точек, требующих уточнения (только Уровень 4)

**Только в полной спецификации Уровня 4** отметьте все точки принятия решений, требующие дальнейшего уточнения:
- Используйте формат `[требуется уточнение: конкретный вопрос]`
- Убедитесь, что отмечено 5-10 ключевых точек принятия решений
- Они будут обработаны на этапе `/clarify`

**Уровни 1-3 не требуют пометки точек уточнения**, поскольку они сами по себе являются процессом постепенного уточнения.

### 6. Управление версиями

**Правила инкрементного управления версиями**:

- **Уровень 1**: 1.0.0-L1 (одно предложение)
- **Уровень 2**: 1.1.0-L2 (параграф)
- **Уровень 3**: 1.2.0-L3 (одна страница)
- **Уровень 4**: 1.0.0 (полная спецификация - черновик)
- **После уточнения**: 1.1.0 (уточненная версия)
- **После планирования**: 1.2.0 (подтвержденная версия)
- **В процессе выполнения**: 2.0.0 (рабочая версия)

**Правила обновления**:
- Уровень 1 → Уровень 2: малая версия +1
- Уровень 2 → Уровень 3: малая версия +1
- Уровень 3 → Уровень 4: сброс до 1.0.0 (начало цикла официальной спецификации)
- Последующие изменения после Уровня 4: по исходным правилам

### 7. Вывод и сохранение

- Сохраните спецификацию в `stories/[имя_истории]/specification.md`
- Выведите сообщение об успешном создании
- **В зависимости от уровня, подскажите следующие шаги**:
  - Уровень 1-3: подскажите, как расширить до следующего уровня
  - Уровень 4: подскажите запустить `/clarify` для уточнения ключевых решений

## Примечания

### Ценность инкрементной спецификации

**Почему нужна инкрементная спецификация?**
- ✅ **Снижение порога входа**: Начните с одного предложения, нет необходимости сразу завершать полную спецификацию
- ✅ **Быстрая проверка**: Проверьте осуществимость идеи, прежде чем вкладывать много усилий
- ✅ **Естественная эволюция**: По мере углубления размышлений спецификация естественно расширяется
- ✅ **Избегание чрезмерного планирования**: Определите глубину спецификации в зависимости от фактической необходимости

**Когда использовать какой уровень?**
- **Уровень 1**: Этап идеи, быстрое фиксирование замысла
- **Уровень 2**: Этап проверки, подтверждение того, стоит ли писать историю
- **Уровень 3**: Этап прототипа, быстрое начало написания (подходит для коротких и средних произведений)
- **Уровень 4**: Официальный этап, для длинных романов или произведений, требующих детального планирования

### Фокус на ЧТО, а не КАК
- ✅ Правильно: "Нужен антагонист, которого читатель будет ненавидеть"
- ❌ Неправильно: "Антагонист появляется в третьей главе, используется ретроспективный метод"

### Сохраняйте гибкость спецификации
- Оставьте пространство для уточнений (Уровень 4)
- Не определяйте детали слишком рано (Уровни 1-3)
- Отмечайте все неопределенные моменты (Уровень 4)

### Принцип инкрементного расширения
- **Наследование**: Уровень N+1 должен содержать весь контент Уровня N
- **Прирост**: Каждый раз добавляйте только необходимые детали
- **Обратимость**: Можно вернуться к более низкому уровню для изменения ключевых элементов
- **Пропускаемость**: Можно напрямую перейти с Уровня 1 на Уровень 4 (если все уже продумано)

### Связь с последующими шагами
- **Уровень 1-3**: Можно сразу начинать писать (подходит для исследовательского творчества)
- **Уровень 4**: Запустите `/clarify` для обработки всех пометок `[требуется уточнение]`
- **После уточнения**: Запустите `/plan` для составления плана написания
- **В процессе выполнения**: Запустите `/analyze` для проверки соответствия реализации спецификации

Помните: **спецификация определяет цель, а не путь. Инкрементная спецификация позволяет вам перейти от неясности к ясности, а не требовать ясности с самого начала.**