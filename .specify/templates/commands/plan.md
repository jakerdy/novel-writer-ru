---
description: Разработка технического решения на основе спецификаций истории
scripts:
  sh: .specify/scripts/bash/plan-story.sh
  ps: .specify/scripts/powershell/plan-story.ps1
---

На основе уточненных спецификаций истории разработайте конкретный план творческих и технических решений.

Ввод пользователя (выбор технологий и предпочтения):
$ARGUMENTS

## Цель

Преобразовать "что создавать" (спецификации) в "как создавать" (план). Это ключевой переход от требований к реализации.

## Шаги выполнения

### 1. Загрузка предварительных документов

Запустите `{SCRIPT}` для проверки и загрузки:
- Конституция проекта: `memory/novel-constitution.md`
- Файлы спецификаций: `stories/*/specification.md`
- Записи уточнений (если `/clarify` был запущен)

Проверьте метки `[Требуется уточнение]` в спецификациях:
- Если существуют неуточненные ключевые решения, предложите сначала запустить `/clarify`
- Или примите явное указание пользователя пропустить этот шаг

### 2. Разработка плана творчества

Создайте файл `stories/*/creative-plan.md`, содержащий следующее:

#### 2.1 Выбор метода написания

На основе анализа спецификаций выберите наиболее подходящий метод написания:
- **Структура из трех актов** (Three-Act Structure): подходит для линейного повествования с четким началом, развитием и завершением.
- **Путешествие героя** (Hero's Journey): подходит для историй о росте и приключениях.
- **Структура из семи точек** (Seven-Point Structure): подходит для историй с напряжением и неожиданными поворотами.
- **Круг историй** (Story Circle): подходит для историй, ориентированных на персонажей и психологическую глубину.
- **Смешанный метод**: использование разных методов для основной и второстепенных сюжетных линий.

Запишите обоснование выбора и способ применения.

#### 2.2 Проектирование структуры глав

```markdown
## Структура глав

### Общее планирование
- Общее количество глав: [На основе целевого объема и длины глав]
- Длина главы: [2000-3000 слов/глава]
- Деление на тома: [Если применимо]

### Сопоставление структуры
[В соответствии с выбранным методом сопоставьте ключевые точки с конкретными главами]

### Планирование темпа
- Завязка (крючок): Глава [X]
- Первый кульминационный момент: Глава [X]
- Центральный поворот: Глава [X]
- Максимальный кризис: Глава [X]
- Финальная кульминация: Глава [X]
```

#### 2.3 Проектирование системы персонажей

```markdown
## Система персонажей

### Дизайн главного героя
- Начальное состояние: [Точка старта]
- Дуга развития: [Траектория изменений]
- Основной конфликт: [Внутренний vs Внешний]
- Ключевые точки трансформации: [Конкретные главы]

### Функции второстепенных персонажей
[Функциональное позиционирование и план появления каждого важного второстепенного персонажа]

### Сеть взаимоотношений
[Диаграмма взаимоотношений персонажей и план их развития]
```

#### 2.4 Построение мира

```markdown
## Система мира

### Основные настройки
- Правила мира: [Физические/магические/технологические правила]
- Социальная структура: [Политическая/экономическая/культурная]
- Исторический контекст: [Важные исторические события]

### План раскрытия мира
- Первый уровень (начало): [Базовые настройки]
- Второй уровень (развитие): [Углубленные настройки]
- Третий уровень (кульминация): [Ключевые тайны]
```

#### 2.5 Технический дизайн сюжета

```markdown
## Технический дизайн сюжета

### Путь эскалации конфликта
1. Начальный конфликт: [Личный уровень]
2. Средний конфликт: [Групповой уровень]
3. Высший конфликт: [Уровень мира]

### Создание интриги
- Основная интрига: [Пронизывает все повествование]
- Интрига главы: [Крючок в каждой главе]
- Второстепенная интрига: [Обогащает слои]

### Расстановка зацепок (подсказок)
[Список зацепок и план их использования]
```

#### 2.6 Выбор техник повествования

```markdown
## Техники повествования

### Дизайн точки зрения (POV)
- Тип точки зрения: [Первое/третье лицо]
- Ограничение точки зрения: [Всеведущий/ограниченный]
- Использование нескольких точек зрения: [Если применимо]

### Дизайн временной шкалы
- Основная временная шкала: [Линейная/нелинейная]
- Вставки воспоминаний: [Стратегия использования]
- Параллельное повествование: [Если применимо]

### Ритм повествования
- Сегменты с быстрым темпом: [Действия/конфликты]
- Сегменты с медленным темпом: [Эмоции/описания]
- Изменение ритма: [Закономерности нарастания и спада]
```

### 3. Запись технических решений

Запишите все важные технические решения:
- **Решение**: Что выбрано
- **Обоснование**: Почему выбрано
- **Риски**: Возможные проблемы
- **План Б**: Альтернативные варианты

### 4. План обеспечения качества

```markdown
## Обеспечение качества

### Чек-лист самопроверки
- [ ] Проверка логической последовательности
- [ ] Обоснованность действий персонажей
- [ ] Самосогласованность мира
- [ ] Плавность темпа

### Точки проверки
- Каждые 5 глав: проверка малого цикла
- Каждый том: проверка большого цикла
- По завершении: полная проверка
```

### 5. Управление рисками

Определите и разработайте стратегии реагирования:
- **Риски творчества**: Вдохновение, логика, темп
- **Технические риски**: Сложность, согласованность
- **Временные риски**: Прогресс, баланс качества

### 6. Вывод и проверка

- Сохраните план в `stories/*/creative-plan.md`
- Проверьте соответствие плана принципам конституции
- Проверьте соответствие плана требованиям спецификаций
- Подскажите следующий шаг: запуск `/tasks` для генерации задач

## Связь с другими командами

- **Ввод**: Спецификации из `/specify` + уточнения из `/clarify`
- **Вывод**: Основа для генерации задач командой `/tasks`
- **Проверка**: Используется командой `/analyze` для проверки соответствия реализации

## Примечания

### Технологии служат истории
- Все технические решения должны служить выражению истории
- Избегайте техник ради самих техник
- Сохраняйте гибкость плана

### Исполнимость
- План должен быть конкретным и исполнимым
- Избегайте излишнего идеализма
- Учитывайте реальные творческие возможности

### Итеративная оптимизация
- План может корректироваться в процессе работы
- Записывайте причины и последствия изменений
- Поддерживайте отслеживание версий

Помните: **Хороший план — половина успеха, но будьте готовы к изменениям.**